{% extends "base.html" %}
<!--  -->
{% load static %}
<!--  -->
{% block center %}
<div class="container row">
  <div class="col-lg-12">
    <div id="alerts"></div>
  </div>
  <div class="page-snippet clearfix">
    <div class="col-lg-12">
      <h1 class="p-title">Settings</h1>
    </div>
    <div class="col-lg-12">
      <section
        class="basic-section b-radius-tl b-radius-tr b-radius-bl b-radius-br basic-section-spaced"
      >
        <form method="POST" action="">
          <table class="fields-layout">
            <tbody>
              <tr>
                <td></td>
                <td>
                  <h2 class="section-title">User information</h2>
                </td>
              </tr>
              <tr>
                <td>First name</td>
                <td>
                  <input
                    name="name"
                    placeholder="First name"
                    value=""
                    type="text"
                  />
                </td>
              </tr>
              <tr>
                <td>Email</td>
                <td>
                  <input
                    class="m-bottom"
                    name="mail"
                    value="inctifra@gmail.com"
                    type="text"
                    readonly=""
                    title="user_mail"
                  />
                </td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <br />
                  <h2 class="section-title">Change password</h2>
                </td>
              </tr>
              <tr>
                <td>Active password</td>
                <td>
                  <input
                    class="m-bottom"
                    name="old_password"
                    placeholder="Active password"
                    type="password"
                    autocomplete="off"
                  />
                </td>
              </tr>
              <tr>
                <td>New password</td>
                <td>
                  <input
                    class="m-bottom"
                    name="new_password"
                    placeholder="New password"
                    type="password"
                    autocomplete="off"
                  />
                </td>
              </tr>
              <tr>
                <td>Confirm password</td>
                <td>
                  <input
                    class="m-bottom"
                    name="conf_password"
                    placeholder="Confirm password"
                    type="password"
                    autocomplete="off"
                  />
                </td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <input
                    class="m-bottom"
                    type="hidden"
                    name="action"
                    value="save_settings"
                  />
                  <button class="btn btn-primary js-preloader" type="submit">
                    Save changes
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
      </section>
    </div>
    <div class="col-lg-12">
      <a name="api"></a>
      <h1 class="p-title">API</h1>
    </div>
    <div class="col-lg-12">
      <section
        class="basic-section basic-section-spaced b-radius-tl b-radius-tr b-radius-bl b-radius-br"
      >
        <table class="fields-layout">
          <tbody>
            <tr>
              <td>API key</td>
              <td>
                <input
                  class="js_key js_copy digit"
                  value="mZekCrbYdFtb2cULuZT0bwP"
                  type="text"
                  readonly=""
                  title="api key"
                />
              </td>
            </tr>
            <tr>
              <td>User ID</td>
              <td>
                <input
                  class="m-bottom js_copy"
                  value="68696"
                  type="text"
                  readonly=""
                  title="copy"
                />
              </td>
            </tr>
            <tr>
              <td></td>
              <td>
                <button class="btn btn-primary js-preloader js_gen_new_key">
                  Generate new Key
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <br />
    </div>
  </div>
</div>
{% endblock center %}
<!--  -->
{% block inline_javascript %}
<!--  -->
<script type="text/javascript">
  $(document).ready(function () {
    $(".js_gen_new_key").click(function () {
      if (confirm("Are you sure you want to generate new API key?")) {
        GenerateNewKey();
      }
    });
    $(".js_copy").on("click", function () {
      $(this).select();
    });
  });
  function GenerateNewKey() {
    send("/admin/generate_api_key_ajax", null, function (data_in) {
      $(document).ready(function () {
        $(".js_key").attr("value", data_in.new_key);
      });
    });
  }
</script>
{% endblock inline_javascript %}
